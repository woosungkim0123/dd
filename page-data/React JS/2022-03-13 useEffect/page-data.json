{
    "componentChunkName": "component---src-templates-post-template-tsx",
    "path": "/React JS/2022-03-13 useEffect/",
    "result": {"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h2>useEffect에 대해 알아보자</h2>\n<h3>문제 인식</h3>\n<p>기본적으로 컴포넌트가 처음 렌더링 되고 state가 변화할 때마다 해당 컴포넌트를 리렌더링 시킨다</p>\n<br>\n<p>API를 통해서 데이터를 가져올 때 컴포넌트가 첫 렌더링시 API를 불러오고 이후 state가 변화할 때는 API에서 데이터를 불러올 필요가 없다</p>\n<br>\n<p>컴포넌트가 처음 render 될 때만 코드를 실행하고 싶다면 어떻게 해야할까?</p>\n<h3>useEffect</h3>\n<p>이럴때 사용하는 것이 useEffect</p>\n<br>\n<p>언제 코드가 실행될지 결정하는 방법이 useEffect이다.</p>\n<br>\n<p>두개의 인자를 가지는데 첫번째는 실행할 함수, 두번째는 dependencies 라고 해서 React.JS가 지켜보아야 하는 것을 넣는다</p>\n<br>\n<p>두번째 인자로 넣은 것이 변화할 때 코드를 실행 시킴</p>\n<br>\n<p>처음 한번만 실행하고 싶으면 첫번째 인자에 한번만 실행하고 싶은 코드를 넣고, 두번째 인자 []를 넣어주면 그 코드는 첫 렌더링 때만 실행되게 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>counter<span class=\"token punctuation\">,</span> setCounter<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\r\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">plusCount</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">setCounter</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">prev</span> <span class=\"token operator\">=></span> prev <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\r\n\r\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'always render'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// state가 변할때 마다 실행</span>\r\n  <span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'API 불러오기'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// 첫 렌더링 때만 실행</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n\r\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\r\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>counter<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\r\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>plusCount<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Click</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\r\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\r\n  <span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>검색 기능을 위한 추가적인 state를 만들었다</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// input에 내용 입력시 내용이 출력</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>keyword<span class=\"token punctuation\">,</span> setKeyword<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token string\">''</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">onChange</span> <span class=\"token operator\">=</span> <span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token function\">setKeyword</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span>\r\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'search for'</span><span class=\"token punctuation\">,</span> keyword<span class=\"token punctuation\">)</span>\r\n\r\n<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\r\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\r\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>input</span>\r\n      <span class=\"token attr-name\">value</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>keyword<span class=\"token punctuation\">}</span></span>\r\n      <span class=\"token attr-name\">onChange</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>onChange<span class=\"token punctuation\">}</span></span>\r\n      <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text<span class=\"token punctuation\">\"</span></span>\r\n      <span class=\"token attr-name\">placeholder</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>Search here<span class=\"token punctuation\">\"</span></span>\r\n    <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\r\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>counter<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h1</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\r\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">onClick</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>plusCount<span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">Click</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\r\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\r\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>button 클릭 시에도 input 내용이 출력되는 버그 발생</p>\n<br>\n<p>input에 변화가 있을 때만 검색이 되고 다른 state가 변할 때는 검색하고 싶지 않다면 어떻게 해야할까?</p>\n<br>\n<p>useEffect에 첫번째 인자로 onChange 함수를 넣고 두번째 인자로 keyword를 넣으면 keyword가 변화할 때만 실행된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'search for'</span><span class=\"token punctuation\">,</span> keyword<span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>keyword<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token comment\">// React JS에게 keyword를 지켜보다가 변화될 때마다 실행시켜줘 라고 요청한 것</span>\r\n\r\n<span class=\"token comment\">// 배열에 여러 개의 요소를 넣을 수도 있다</span>\r\n<span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'search for'</span><span class=\"token punctuation\">,</span> keyword<span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>keyword<span class=\"token punctuation\">,</span> counter<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>아까 빈 배열을 넣었을 때 한번만 실행된 이유도 빈 배열이 변화 될 수 없으니까</p>\n<br>\n<p>여기서도 아직 버그가 있다</p>\n<br>\n<p>첫 실행시에 검색이 한번 실행 되는데 이럴때는 조건으로 막아주면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\r\n  <span class=\"token comment\">// 첫 실행이거나 keyword가 5이하면 작동하지 않음</span>\r\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>keyword <span class=\"token operator\">!==</span> <span class=\"token string\">''</span> <span class=\"token operator\">&amp;&amp;</span> keyword<span class=\"token punctuation\">.</span>length <span class=\"token operator\">></span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'search for'</span><span class=\"token punctuation\">,</span> keyword<span class=\"token punctuation\">)</span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>keyword<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2>Source</h2>\n<ul>\n<li>\n<p>노마드 코더 리액트 강의</p>\n<p><a href=\"https://nomadcoders.co/\" target=\"_blank\" rel=\"nofollow\">https://nomadcoders.co/</a></p>\n</li>\n</ul>","fields":{"slug":"/React JS/2022-03-13 useEffect/"},"frontmatter":{"title":"useEffect","summary":"useEffect에 대해 알아보자","date":"2022.03.13.","categories":["React","Javascript"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA8UlEQVQoz52T7WrCUAyGe/+X0AvoX4f7RBi9gFGETfZnCGIZrNha9ByPiCd5RpWCK21nDYQEcvLyJOQEdJiqtsZm3rTgGjHnz3EvilzU2oSD/wgrsS+nvFtlZpXNUXspOwnrhsVeeS2FcS48FsLn7gbC+mFFMzXKZC2MVsJ9LrxtlZ9DN2UP4Slj7oRJ4Rnnnodc+DD+zx6v3mHddATmB5g6mDnYNeqDRt4aQ5IkfBcl5bpgtTEslkuMMcNHrizLMsIwZHw3IooiXp6fiOOYNE3PlCLD77BqstaeqIy1OOfw3g/fYd9vuOkOL2+tzbsIfwEPDa31cI0wfgAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/bf3fa5e09a7d77ec7556f0458691eb7a/74e29/React.png","srcSet":"/static/bf3fa5e09a7d77ec7556f0458691eb7a/98324/React.png 97w,\n/static/bf3fa5e09a7d77ec7556f0458691eb7a/74d80/React.png 193w,\n/static/bf3fa5e09a7d77ec7556f0458691eb7a/74e29/React.png 386w","sizes":"(min-width: 386px) 386px, 100vw"},"sources":[{"srcSet":"/static/bf3fa5e09a7d77ec7556f0458691eb7a/865bc/React.webp 97w,\n/static/bf3fa5e09a7d77ec7556f0458691eb7a/918e8/React.webp 193w,\n/static/bf3fa5e09a7d77ec7556f0458691eb7a/1875a/React.webp 386w","type":"image/webp","sizes":"(min-width: 386px) 386px, 100vw"}]},"width":386,"height":225}}}}}}]}},"pageContext":{"slug":"/React JS/2022-03-13 useEffect/"}},
    "staticQueryHashes": []}