{
    "componentChunkName": "component---src-templates-post-template-tsx",
    "path": "/Node JS/2022-03-27 Milddleware/",
    "result": {"data":{"allMarkdownRemark":{"edges":[{"node":{"html":"<h2>Milddleware에 대해 알아보자</h2>\n<h3>개념</h3>\n<p>중간에 있는 소프트웨어</p>\n<br>\n<p>브라우저가 request한 다음, 그리고 응답하기 전에 그 사이에 middleware가 있음</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token comment\">/*\r\nconst logger = (req, res, next) => {\r\n  console.log(`${req.method} ${req.url}`)\r\n  next();\r\n}\r\nconst privateMiddleware = (req, res, next) => {\r\n  const url = req.url\r\n  if(url === \"/protected\") {\r\n    return res.send(\"&lt;h1>Not allowed&lt;/h1>\")\r\n  }\r\n  console.log('allowed')\r\n  next();\r\n}\r\nconst handleHome = (req, res) => {\r\n  \r\n  return res.send('1');\r\n  // res.end 끝내는거\r\n}\r\nconst handlePrivate = (req, res) => {\r\n  return res.send('welcome private lounge');\r\n}\r\napp.use(logger)\r\napp.use(privateMiddleware)\r\napp.get(\"/\", handleHome)\r\napp.get(\"/\", handlePrivate)\r\n*/</span>\r\n<span class=\"token comment\">// route 추가</span>\r\n<span class=\"token comment\">// handleHome은 사실상 finalWare, 마지막으로 호출되는 함수, return 하면 연결이 종료되니까</span>\r\n<span class=\"token comment\">// 그래서 next가 필요없음</span>\r\n<span class=\"token comment\">// 하지만 모든 controller가 미들웨어가 될 수 있음</span>\r\n<span class=\"token comment\">// res.send('111')을 next 이전에 적으면 다음 함수는 호출되지않음</span></code></pre></div>","fields":{"slug":"/Node JS/2022-03-27 Milddleware/"},"frontmatter":{"title":"Milddleware","summary":"Milddleware(미들웨어)","date":"2022.03.26.","categories":["NodeJS"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA8UlEQVQoz52T7WrCUAyGe/+X0AvoX4f7RBi9gFGETfZnCGIZrNha9ByPiCd5RpWCK21nDYQEcvLyJOQEdJiqtsZm3rTgGjHnz3EvilzU2oSD/wgrsS+nvFtlZpXNUXspOwnrhsVeeS2FcS48FsLn7gbC+mFFMzXKZC2MVsJ9LrxtlZ9DN2UP4Slj7oRJ4Rnnnodc+DD+zx6v3mHddATmB5g6mDnYNeqDRt4aQ5IkfBcl5bpgtTEslkuMMcNHrizLMsIwZHw3IooiXp6fiOOYNE3PlCLD77BqstaeqIy1OOfw3g/fYd9vuOkOL2+tzbsIfwEPDa31cI0wfgAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/bf3fa5e09a7d77ec7556f0458691eb7a/74e29/React.png","srcSet":"/static/bf3fa5e09a7d77ec7556f0458691eb7a/98324/React.png 97w,\n/static/bf3fa5e09a7d77ec7556f0458691eb7a/74d80/React.png 193w,\n/static/bf3fa5e09a7d77ec7556f0458691eb7a/74e29/React.png 386w","sizes":"(min-width: 386px) 386px, 100vw"},"sources":[{"srcSet":"/static/bf3fa5e09a7d77ec7556f0458691eb7a/865bc/React.webp 97w,\n/static/bf3fa5e09a7d77ec7556f0458691eb7a/918e8/React.webp 193w,\n/static/bf3fa5e09a7d77ec7556f0458691eb7a/1875a/React.webp 386w","type":"image/webp","sizes":"(min-width: 386px) 386px, 100vw"}]},"width":386,"height":225}}}}}}]}},"pageContext":{"slug":"/Node JS/2022-03-27 Milddleware/"}},
    "staticQueryHashes": []}