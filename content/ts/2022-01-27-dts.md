---
layout: post
current: post
cover: assets/built/images/js.jpg
navigation: True
title: d.ts
date: 2022-01-26 21:00
tags: [ts]
class: post-template
subclass: "post tag-python"
author: Lome
---

<br>

<strong class="subtitle_fontAwesome">d.ts</strong>

<strong class="subtitle2_fontAwesome">개념</strong>

타입정의 보관용 파일

```typescript
// export해서 사용
export type Age = number;

// index.ts
import { Age } from "./test.d";

// 만약 import/export 할게 많으면 namespace를 사용하던가 import * as 사용
```

모든 타입을 정리해놓은 레퍼런스용으로 d.ts를 사용하기도함(ts 파일에 있는 모든 타입들을 정리해놓은 문서)

예를들어 index.ts에서 사용하는 타입들을 저장시 index.d.ts파일로 자동 생성해줌(tsconfig.json에서 declaration : true)

자동생성되는 경우 d.ts 파일을 수정하면 안된다

d.ts 파일 용도

1. 타입정의 따로 보관 파일이 필요하면

2. 타입 레퍼런스용으로 생성하고 싶으면

<br>

<strong class="subtitle2_fontAwesome">글로벌 모듈</strong>

모든 ts파일은 기본이 글로벌 모듈이나 d.ts파일은 자동으로 글로벌 모듈이 아님(그래서 항상 export 해야 사용가능)

```javascript
//override 할 수 있다(export 귀찮을때) -> tsconfig.json에서

typeRoots: ["./types"]; // 폴더명 기입(이 폴더 안에 있는 타입은 글로벌하게 이용하게 해줌)
// 약간 위험해서 사용 자제
```

<br>

<strong class="subtitle2_fontAwesome">외부 라이브러리</strong>

외부 라이브러리 사용시 타입정의 에러가 나는데(jquery 등) 타입정의를 해야하는데 다른 사람이 해놓은 타입정의를 가져다 쓰면 됨

가장 유명한 사이트가 Definitely Typed github 리포지토리

유명한 라이브러리 타입을 지정해서 올려놓음

원하는 d.ts파일을 다운받아서 사용하면 됨

찾기 어려우면 타입스크립트 공홈가서 검색

유명한 라이브러리들은 npm 설치시 자동으로 타입이 들어오는 경우도 있음

```javascript
// 타입정의만 설치하고 싶으면
npm i @types/jquery
// node_modules 안에 types 모든 타입 파일들이 들어 있음
// @types 폴더에 있는 타입들은 글로벌 모듈
```

<br>
<br>

<strong class="subtitle_fontAwesome">implements</strong>

<strong class="subtitle2_fontAwesome">개념</strong>

interface는 object 타입지정할 때 사용, 다른 용도로는 class 타입 확인시 사용이 가능한데 implements 키워드가 필요하다

```javascript
class Car {
  model: string;
  price: number = 1000;
  constructor(a: string) {
    this.model = a;
  }
}
let 붕붕이 = new Car("morning");
```

class Car 로부터 생산되는 object들은 model과 price 속성을 가지고 있음

근데 class가 model, price 속성을 가지고 있는지 타입으로 확인 하고싶을때 interface + implements 키워드로 확인

```javascript
interface CarType {
  model: string;
  price: number;
}

class Car implements CarType {
  model: string;
  price: number = 1000;
  constructor(a: string) {
    this.model = a;
  }
}
let 붕붕이 = new Car("morning");
// class 이름 우측에 implements를 쓰고 interface 이름을 쓰면 class가 interface 속성을 다 가지고 있는지 확인이 가능하고 빠진 속성이 있으면 에러로 알려줌
```

implements는 interface에 들어있는 속성을 가지고 있는지 확인만하라는 뜻

class에다가 타입을 할당하고 변형시키는 키워드는 아니다

<br>
<br>

<strong class="subtitle_fontAwesome">obejct 쉽게 타입지정</strong>

<strong class="subtitle2_fontAwesome">object 타입지정</strong>

```typescript
// 기본적인 object 타입지정
interface StringOnly {
  name: string;
  age: string;
  location: string;
}
let user :StringOnly = {
  name : 'kim'
  age : '20'
  location : 'seoul'
}
```

모든 속성이 string이라고 타입지정도 가능

```typescript
// index signature을 쓰면 object 타입지정 한번에 가능
interface StringOnly {
  [key : string] : string,
  // 모든 string타입의 속성은 string을 가집니다
}
let user :StringOnly = {
  name : 'kim'
  age : '20'
  location : 'seoul'
}
```

```javascript
interface StringOnly {
  [key: string]: string | number;
  // 이런식으로 지정하면 조금더 확장성있게 가능
}
// 그리고 이런식은 금지
interface StringOnly {
  age: number; // 에러 그 이유는 age [key : string]에 걸림
  [key: string]: string;
}
// 이런식은 가능
interface StringOnly {
  age: number;
  [key: string]: string | number;
}
```

```typescript
// 속성 이름을 숫자로 가능(key값에 숫자)
// object에서 숫자를 key값으로 해도 문자화됨
let user :StringOnly = {
  0 : 'kim'
  1 : '20'
  2 : 'seoul'
}
user[0] // 'kim'출력
```

```typescript
interface MyType {
  "font-size": {
    "font-size": {
      "font-size": number;
    };
  };
}
let obj: MyType = {
  "font-size": {
    "font-size": {
      "font-size": 14,
    },
  },
};
```

조금더 간략하게 줄이려면?

```typescript
// recursive하게 타입 만드는법
// 타입을 만들면 안에서 가져다 쓸 수 있다
// 이거 한줄로 같은 이름으로 반복되는 object의 타입을 지정해줄 수 있음
// MyType만 넣으면 마지막에서 에러가 남, 마지막 font-size는 숫자기 때문에
interface MyType {
  "font-size": MyType | number;
}

let obj: MyType = {
  "font-size": {
    "font-size": {
      "font-size": 14,
    },
  },
};
```
