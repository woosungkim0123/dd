<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.13.3"/><style data-href="/styles.9e907bc32054b7771552.css" data-identity="gatsby-global-css">code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#ccc;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}</style><link rel="canonical" href="https://woosungkim0123.github.io/2023_05_04_image_processing/" data-baseprotocol="https:" data-basehost="woosungkim0123.github.io"/><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion="css 13ku56z">.css-13ku56z{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;height:100%;}</style><main class="css-13ku56z e1strnqo0"><style data-emotion="css-global k3rvxk">@import url('https://fonts.googleapis.com/css2?family=Nanum+Myeongjo:wght@400;700;800&display=swap');@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100..900&display=swap');*{padding:0;margin:0;box-sizing:border-box;font-family:'Noto Sans KR','Nanum Myeongjo',serif;}html,body,#___gatsby{height:100%;}a,a:hover{color:inherit;-webkit-text-decoration:none;text-decoration:none;cursor:pointer;}</style><style data-emotion="css 16cz9yp">.css-16cz9yp{position:relative;width:100%;height:400px;}@media (max-width: 768px){.css-16cz9yp{height:300px;}}</style><div class="css-16cz9yp e1opi4mu1"><style data-emotion="css 1bjn9yo">.css-1bjn9yo{z-index:-1;width:100%;height:400px;object-fit:cover;-webkit-filter:brightness(0.25);filter:brightness(0.25);}@media (max-width: 768px){.css-1bjn9yo{height:300px;}}</style><div data-gatsby-image-wrapper="" style="position:absolute;overflow:hidden;display:inline-block;vertical-align:top" class="gatsby-image-wrapper gatsby-image-wrapper-constrained css-1bjn9yo e1opi4mu0"><div style="max-width:1024px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg%20height=&#x27;1024&#x27;%20width=&#x27;1024&#x27;%20xmlns=&#x27;http://www.w3.org/2000/svg&#x27;%20version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><img aria-hidden="true" data-placeholder-image="" style="height:100%;left:0;position:absolute;top:0;width:100%" decoding="async" src="data:image/webp;base64,UklGRvgAAABXRUJQVlA4IOwAAADQBQCdASoUABQAPp1GnUslo6KhqAgAsBOJbACdMyX89hUiIkC/+24SFusHtX/wo7sf5dnbKTUAAP70XPoahsQb9xeW0lqyjpIqkGf34UMmDrNHlhBlJWJmxjZvGRUfTvKWyue0hedoZrnpOs0dCJuJTmsSHkQdxENcYODQ1RTxd9rLTIo3uVsVGR7tOc4z4QTflYGtHRg5cirgIj779b26/WmaxB724O+1sDlf1jb649r6TFguLkf/8BwSapYAHHamSWpV6ygJJ+IxT5D0FzxpUF2d2WbupKn69C8Lbn39FLMWEUqWBZECAAAAAA==" alt=""/><img data-gatsby-image-ssr="" data-main-image="" style="height:100%;left:0;position:absolute;top:0;transform:translateZ(0);transition:opacity 250ms linear;width:100%;will-change:opacity;opacity:0" sizes="(min-width: 1024px) 1024px, 100vw" decoding="async" loading="lazy" data-src="/static/28c821d7ad2ed2c7ad9a7f1d1256aacd/af1dc/2023_05_04_image_processing_main.webp" data-srcset="/static/28c821d7ad2ed2c7ad9a7f1d1256aacd/1697f/2023_05_04_image_processing_main.webp 256w,/static/28c821d7ad2ed2c7ad9a7f1d1256aacd/6172c/2023_05_04_image_processing_main.webp 512w,/static/28c821d7ad2ed2c7ad9a7f1d1256aacd/af1dc/2023_05_04_image_processing_main.webp 1024w" alt="thumbnail"/><noscript><img data-gatsby-image-ssr="" data-main-image="" style="height:100%;left:0;position:absolute;top:0;transform:translateZ(0);transition:opacity 250ms linear;width:100%;will-change:opacity;opacity:0" sizes="(min-width: 1024px) 1024px, 100vw" decoding="async" loading="lazy" src="/static/28c821d7ad2ed2c7ad9a7f1d1256aacd/af1dc/2023_05_04_image_processing_main.webp" srcSet="/static/28c821d7ad2ed2c7ad9a7f1d1256aacd/1697f/2023_05_04_image_processing_main.webp 256w,/static/28c821d7ad2ed2c7ad9a7f1d1256aacd/6172c/2023_05_04_image_processing_main.webp 512w,/static/28c821d7ad2ed2c7ad9a7f1d1256aacd/af1dc/2023_05_04_image_processing_main.webp 1024w" alt="thumbnail"/></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div><style data-emotion="css m1156n">.css-m1156n{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:768px;height:100%;margin:0 auto;padding:60px 0;color:#ffffff;}@media (max-width: 768px){.css-m1156n{width:100%;padding:40px 20px;}}</style><div class="css-m1156n e1st1jau4"><style data-emotion="css sk2v7u">.css-sk2v7u{display:grid;place-items:center;width:40px;height:40px;border-radius:50%;background:#ffffff;color:#000000;font-size:22px;cursor:pointer;box-shadow:0 0 10px rgba(0, 0, 0, 0.3);margin-bottom:92px;}@media (max-width: 768px){.css-sk2v7u{width:30px;font-size:18px;margin-bottom:66px;}}</style><div class="css-sk2v7u e1st1jau3"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="arrow-left" class="svg-inline--fa fa-arrow-left " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"></path></svg></div><style data-emotion="css 12bs708">.css-12bs708{display:-webkit-box;overflow:hidden;overflow-wrap:break-word;margin-top:auto;text-overflow:ellipsis;white-space:normal;-webkit-line-clamp:2;-webkit-box-orient:vertical;font-size:45px;font-weight:800;margin-bottom:10px;height:110px;}@media (max-width: 768px){.css-12bs708{font-size:30px;}}</style><div class="css-12bs708 e1st1jau2">이미지 처리를 통한 성능 개선 회고</div><style data-emotion="css 3gcnt2">.css-3gcnt2{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-top:10px;font-size:18px;font-weight:700;}@media (max-width: 768px){.css-3gcnt2{-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;font-size:15px;font-weight:400;}}</style><div class="css-3gcnt2 e1st1jau1"><style data-emotion="css vqx3x2">.css-vqx3x2{margin-bottom:5px;}</style><div class="css-vqx3x2 e1st1jau0">Web / Optimization / Image</div><div class="css-vqx3x2 e1st1jau0">2023.05.04.</div></div></div></div><style data-emotion="css zcilcj">.css-zcilcj{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;width:768px;margin:0 auto;padding:100px 0;word-break:break-all;line-height:1.8;font-size:16px;font-weight:400;}.css-zcilcj p{padding:3px 0;}.css-zcilcj h1,.css-zcilcj h2,.css-zcilcj h3{font-weight:800;margin-bottom:30px;}.css-zcilcj *+h1,.css-zcilcj *+h2,.css-zcilcj{margin-top:80px;}.css-zcilcj *+h3{margin-top:20px;}.css-zcilcj hr+h1,.css-zcilcj hr+h2,.css-zcilcj hr+h3{margin-top:0;}.css-zcilcj h1{font-size:30px;}.css-zcilcj h2{font-size:25px;}.css-zcilcj h3{font-size:20px;}.css-zcilcj blockquote{margin:30px 0;padding:5px 15px;border-left:2px solid #000000;font-weight:800;}.css-zcilcj ol,.css-zcilcj ul{margin-left:20px;padding:30px 0;}.css-zcilcj hr{border:1px solid #000000;margin:100px 0;}.css-zcilcj a{color:#4263eb;-webkit-text-decoration:underline;text-decoration:underline;}.css-zcilcj pre[class*='language-']{margin:30px 0;padding:15px;font-size:15px;}.css-zcilcj pre[class*='language-']::-webkit-scrollbar-thumb{background:rgba(255, 255, 255, 0.5);border-radius:3px;}.css-zcilcj code[class*='language-'],.css-zcilcj pre[class*='language-']{tab-size:2;}@media (max-width: 768px){.css-zcilcj{width:100%;padding:80px 20px;line-height:1.6;font-size:14px;}.css-zcilcj h1{font-size:23px;}.css-zcilcj h2{font-size:20px;}.css-zcilcj h3{font-size:17px;}.css-zcilcj img{width:100%;}.css-zcilcj hr{margin:50px 0;}}</style><div class="css-zcilcj e1ijh0y10"><h1>주요 포인트</h1>
<p>이번 글에서는</p>
<ul>
<li><strong>고용량 이미지로 인한 로딩 속도 문제를 해결한 경험</strong></li>
<li><strong>그 과정에서 발생한 일에 대한 회고</strong></li>
<li><strong>더 나은 해결책</strong></li>
</ul>
<p>에 대해 이야기 해보겠습니다.</p>
<h1>시작하기 전</h1>
<p>웹 뷰 모바일 앱을 개발하면서 고용량의 이미지로 인해 페이지 로딩 속도가 현저하게 느려지는 문제를 만나게 되었습니다. 이 문제를 해결하기 위해 Sharp 라이브러리를 도입하여 이미지 압축을 실행했고, 이를 통해 성능 문제를 개선할 수 있었습니다.</p>
<br>
<p>개인적으로, 라이브러리를 도입하여 문제를 해결한 것이 큰 성과라고 생각하지는 않지만, 라이브러리를 도입하는 과정에 진행한 <strong>Node 버전 업그레이드</strong>, <strong>버전 호환을 위한 대량의 코드 수정</strong> 그리고 <strong>이미지를 저장하는 방식</strong>, <strong>이미지 처리 방법</strong> 등에 대해 회고 해볼 필요가 있다고 생각했습니다.</p>
<br>
<p>먼저 당시 상황에 대해 간략히 이야기 해보겠습니다.</p>
<h1>문제 발생</h1>
<p>스크롤 형식의 게시판에서 한 게시물 당 최대 5개의 이미지를 목록에서 보여주도록 변경하였고, 카메라로 촬영한 사진을 바로 등록할 수 있도록 기존 2MB 제한을 풀어 10MB로 늘렸습니다.</p>
<br>
<br>
<center>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 177px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/469bbc9f64fa6c7aad0897b1b516c1fb/ad6ca/2023_05_04_image_processing_1.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 202.2598870056497%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/469bbc9f64fa6c7aad0897b1b516c1fb/5cd3b/2023_05_04_image_processing_1.webp 177w"
              sizes="(max-width: 177px) 100vw, 177px"
              type="image/webp"
            />
          <source
            srcset="/static/469bbc9f64fa6c7aad0897b1b516c1fb/ad6ca/2023_05_04_image_processing_1.png 177w"
            sizes="(max-width: 177px) 100vw, 177px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/469bbc9f64fa6c7aad0897b1b516c1fb/ad6ca/2023_05_04_image_processing_1.png"
            alt="당시 앱 상황 예시"
            title=""
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
</center>
<br>
<br>
<p>카메라로 직접 촬영한 사진을 게시하는 경우가 많았는데, 이 경우 파일 크기가 평균 3MB에 달했습니다. 이런 상황에 여러 사진들이 게시물 목록에 동시에 표시되면서, 모바일 환경에서 페이지 로딩 속도가 평균 3초로 눈에 띄게 느려졌습니다.</p>
<br>
<br>
<center>
<p><img src="/3b4e9e94acb51336fe33e2ddf80b4ea5/2023_05_04_image_processing_2.gif" alt="성능 개선 전"></p>
</center>
<br>
<br>
<p>한 번에 불러오는 게시물의 수를 10개까지 줄여보았지만, 성능적으로 유의미한 결과를 얻을 수 없었습니다.</p>
<h1>Sharp 도입을 통한 개선</h1>
<p>이를 개선해달라는 지속적인 피드백이 있었지만 당시 프로젝트 Node.js 버전이 0.10 으로 압축 라이브러리 등의 다른 서드 파티의 도움을 받기가 쉽지 않았습니다.</p>
<br>
<p>그래서 Node 버전을 14까지 올리고 이미지 압축 라이브러리인 Sharp를 도입해 로딩 속도를 3초에서 1초 밑으로 개선할 수 있었습니다.</p>
<br>
<p><strong>Sharp 사용시 이미지 용량 변화</strong></p>
<p>1.47MB => 58.1KB</p>
<br>
<br>
<center>
<p><img src="/84e53397359f47c7d54c7d537d172836/2023_05_04_image_processing_3.gif" alt="성능 개선 후"></p>
</center>
<br>
<br>
<h1>회고 및 개선</h1>
<p>당시에는 이 방법이 효과적이었으며, 큰 문제 없이 원하는 결과를 얻을 수 있었습니다.</p>
<br>
<p>하지만 시간이 지나고 다시 돌아보니, 단순히 문제를 해결했다는 것 이상으로 많은 생각과 개선 가능성에 대해 고민하게 되었습니다.</p>
<br>
<p>어떤 부분에서 많은 생각이 들고, 개선 가능성이 있는지에 대해 이야기 해보겠습니다.</p>
<h2>1. 이미지를 서버 자체에 저장</h2>
<h3>회고</h3>
<br>
<br>
<center>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 538px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/748f3c30e25ac49bb11af77782aec1c7/32ca7/2023_05_04_image_processing_4.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 21.875%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAApUlEQVR42iWO2Q6FIAxE+f+P88kXEowSBUXRuECuu/dEm9CW6XQ6whiTZZmUsu/7bdt+b6zrGmMEeZ7nvu8vg0M4jmPfdwj0gs00TZMk6bpuWZZpmoZhIIcQrLVN01RVVdd1nufOuXme+cJk2rat4GmtkQDiFNl7DziOY1mW+GJaFIVSCoSzKMK5rguyoOAKSwhjNbxBw3EkGH2E8zxZ/hwR9DHGP2nA3+2QzHhkAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/748f3c30e25ac49bb11af77782aec1c7/a59e9/2023_05_04_image_processing_4.webp 192w,
/static/748f3c30e25ac49bb11af77782aec1c7/0ca9f/2023_05_04_image_processing_4.webp 384w,
/static/748f3c30e25ac49bb11af77782aec1c7/d17f0/2023_05_04_image_processing_4.webp 538w"
              sizes="(max-width: 538px) 100vw, 538px"
              type="image/webp"
            />
          <source
            srcset="/static/748f3c30e25ac49bb11af77782aec1c7/3b721/2023_05_04_image_processing_4.png 192w,
/static/748f3c30e25ac49bb11af77782aec1c7/66595/2023_05_04_image_processing_4.png 384w,
/static/748f3c30e25ac49bb11af77782aec1c7/32ca7/2023_05_04_image_processing_4.png 538w"
            sizes="(max-width: 538px) 100vw, 538px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/748f3c30e25ac49bb11af77782aec1c7/32ca7/2023_05_04_image_processing_4.png"
            alt="단일 서버 구조"
            title=""
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
</center>
<br>
<br>
<p>해당 서비스는 파일 저장을 위해 단일 서버 구조를 가지고 있었습니다.</p>
<br>
<p>당시의 요구를 충족시키기에는 충분했지만, 서비스가 지속적으로 성장하고 있는 상황을 고려하면 단일 서버 구조는 확장 즉, <strong>Scale Out</strong> 을 고려하지 않는 판단이였던 것 같습니다.</p>
<br>
<p>만약 해당 서비스가 이대로 <strong>Scale Out</strong> 을 진행한다고 가정해보겠습니다.</p>
<br>
<br>
<center>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 608px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/9aba04d52ae05bb546f923b622e90f65/5db90/2023_05_04_image_processing_5.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 47.91666666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA6ElEQVR42o2R626FIBCEff+HPEXxRhUEEQTShY6YJk2a9Pj9IBvZ2RmXppRCOUetPWNBqS+iknN5RsM5X5bFO3cY445j3/eU0lPxPM9CCGPMKuWmtZSSMZafmTdEpJTSWm8V1BgE/xjje3HbttM0QaArcL5jHxWMSJUQwrUdIhT4eJ/NUrliryuccX68XtZa51zf97zrhmHoOIfHOI74QVyhQBtsrtgIeZ6nr6CGIUxCSsbazZjtVyK4QWwq6GzGyucPmI2mMwQjBHmfrUXWN9vGbIS/N4eEzvsSYw6BnPtP/Dc29A/f+Rst+kJRNPPFcQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/9aba04d52ae05bb546f923b622e90f65/a59e9/2023_05_04_image_processing_5.webp 192w,
/static/9aba04d52ae05bb546f923b622e90f65/0ca9f/2023_05_04_image_processing_5.webp 384w,
/static/9aba04d52ae05bb546f923b622e90f65/dfa82/2023_05_04_image_processing_5.webp 608w"
              sizes="(max-width: 608px) 100vw, 608px"
              type="image/webp"
            />
          <source
            srcset="/static/9aba04d52ae05bb546f923b622e90f65/3b721/2023_05_04_image_processing_5.png 192w,
/static/9aba04d52ae05bb546f923b622e90f65/66595/2023_05_04_image_processing_5.png 384w,
/static/9aba04d52ae05bb546f923b622e90f65/5db90/2023_05_04_image_processing_5.png 608w"
            sizes="(max-width: 608px) 100vw, 608px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/9aba04d52ae05bb546f923b622e90f65/5db90/2023_05_04_image_processing_5.png"
            alt="상태가 있는 서버 구조"
            title=""
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
</center>
<br>
<br>
<p>만약 서비스가 수평적 확장을 통해 여러 서버에 파일 저장 기능을 분산시킨 경우, 각 서버는 고유한 데이터 상태를 가지게 될 것입니다. 이는 데이터 일관성 문제를 야기할 수 있습니다.</p>
<br>
<p>예를 들어, 사용자가 ‘image1’을 삭제하도록 요청했으나, 이 요청이 ‘image1’파일이 없는 서버로 전송될 경우, 삭제 작업이 제대로 이루어지지 않을 수 있습니다.</p>
<br>
<p>그리고 만약 클라우드 환경이면 이미지 때문에 부하가 없음에도 불구하고 인스턴스를 유지해야하는 상황도 발생할 수 있습니다.</p>
<br>
<h3>개선 방법</h3>
<br>
<br>
<center>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 768px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/263171b379fe9747bb5cab5a09a1b0a0/d2c78/2023_05_04_image_processing_6.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 57.29166666666667%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA/UlEQVR42oWSjQ6DIAyEff/XNHHGnwkMUUHcPqmyJWbxkjWl7fXazuJ9QfBeGdsq65yLMb7/o+A3TdM4ji4BfxgGrZXRCqdpmhsynHVdcbZtw1pru77vnzukXQghJkhBPHEoZ8zzrE6g3HXdsizoV1X1SJAUEWPMToaAWl4PH2GYKJPy3r8SbAJPNGCSOsjszORE0RHNtLnGkpVpf8E6351pDI0WPLEoYGkP/3oneh1kGstulDInt8knoYhxqKNGzoEVvsgU9EbHnGjbVuoAs+yXT5ArkKWG+KHMhryxTI6VllvC/sGEQDwvgs/BGEeyRXWiruuyLGmU//BbfAAgg35ooc0I6wAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/263171b379fe9747bb5cab5a09a1b0a0/a59e9/2023_05_04_image_processing_6.webp 192w,
/static/263171b379fe9747bb5cab5a09a1b0a0/0ca9f/2023_05_04_image_processing_6.webp 384w,
/static/263171b379fe9747bb5cab5a09a1b0a0/dc9b9/2023_05_04_image_processing_6.webp 768w,
/static/263171b379fe9747bb5cab5a09a1b0a0/65d6a/2023_05_04_image_processing_6.webp 812w"
              sizes="(max-width: 768px) 100vw, 768px"
              type="image/webp"
            />
          <source
            srcset="/static/263171b379fe9747bb5cab5a09a1b0a0/3b721/2023_05_04_image_processing_6.png 192w,
/static/263171b379fe9747bb5cab5a09a1b0a0/66595/2023_05_04_image_processing_6.png 384w,
/static/263171b379fe9747bb5cab5a09a1b0a0/fe486/2023_05_04_image_processing_6.png 768w,
/static/263171b379fe9747bb5cab5a09a1b0a0/d2c78/2023_05_04_image_processing_6.png 812w"
            sizes="(max-width: 768px) 100vw, 768px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/263171b379fe9747bb5cab5a09a1b0a0/fe486/2023_05_04_image_processing_6.png"
            alt="CDN, S3 사용"
            title=""
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
</center>
<br>
<br>
<p>이 문제에 있어서는 Amazon S3(Simple Storage Service)와 같은 별도의 스토리지 솔루션을 사용하는 것이 좋은 방법이 될 것 같습니다.</p>
<br>
<p>그러나 위 그림처럼 클라이언트에서 백엔드 서버로 파일을 전송한 뒤, 백엔드 서버에서 S3로 다시 파일을 전송하는 구조는 추가적인 네트워크 통신이 발생하기 때문에 성능적인 문제를 야기할 수 있습니다.</p>
<br>
<p>그렇다고 프론트에서 직접 S3로 보내는 방법은 성능적인 이점을 제공하지만 보안적인 이슈가 따라올 수 밖에 없습니다.</p>
<br>
<br>
<center>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 452px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/6bdf9021ad5abd49ee36144405461164/80d88/2023_05_04_image_processing_7.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 76.56250000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB5ElEQVR42pVSzW7TQBD2s/AAnLhxA4kbEscibhx4h3Irr8CJA6eKF+iBiguFRkmbtk7lROCu07imTSKS2PFPvLte78+wa7fCpOXQ0Xg1653vm9lv1gKA1dWliBY6AKXgLktX9Dz47V/OMC1N1s1/a767833jeev1y1mnZQ7yBTAMJamcghJcqO6pt3/gfG3ZvcGoSWo5b161nzz69PBBb2vTgBcI4l+QXEE6gcUZkJAJ6By77WN3r93vnqJmcxZ69/bkxdPPzx67H94bMCPA8soxkAg4Zlwd2ujgxP3WcdbBghJv+2O0uyM4b1znrwmpBm7Q6w9txzs7HzczLP2Np9MoThhjSZJUqqmKRVWhSc6yzHEcz/N4XUDJypUBr9KUYqzz0jTFGN8ubihECZyuTcNayyO0yDBR/2YpXUdLGA7NJkRGyNkPWPpWTVy3ahCc0micLEMhZAMtjfh59RZwBMMv4O9BkVhNfr3IZCKDDs+XabbSKtwcCVMNh9fbEgMv7mibEhL4o7JktU6UUh1oFkZxqRdKlRQ137VgTZNK0aKQVRf6Lnmea2Acx5PpdDafL+O4KIr/CnbbpJR6hBe+37NtzULvBdY28n3keRdBgBCqL3IPsH4e3aOj/mDw03XryvUk/wD4QVNnML4QsAAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/6bdf9021ad5abd49ee36144405461164/a59e9/2023_05_04_image_processing_7.webp 192w,
/static/6bdf9021ad5abd49ee36144405461164/0ca9f/2023_05_04_image_processing_7.webp 384w,
/static/6bdf9021ad5abd49ee36144405461164/a0edd/2023_05_04_image_processing_7.webp 452w"
              sizes="(max-width: 452px) 100vw, 452px"
              type="image/webp"
            />
          <source
            srcset="/static/6bdf9021ad5abd49ee36144405461164/3b721/2023_05_04_image_processing_7.png 192w,
/static/6bdf9021ad5abd49ee36144405461164/66595/2023_05_04_image_processing_7.png 384w,
/static/6bdf9021ad5abd49ee36144405461164/80d88/2023_05_04_image_processing_7.png 452w"
            sizes="(max-width: 452px) 100vw, 452px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/6bdf9021ad5abd49ee36144405461164/80d88/2023_05_04_image_processing_7.png"
            alt="Pre-Signed URL 사용"
            title=""
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
</center>
<br>
<br>
<p>이 문제에 대해서는 임시 엑세스 권한을 부여하는 방식인 <strong>Pre-Signed URL</strong> 방식을 사용해서 해결할 수 있습니다.</p>
<ol>
<li>
<p>백엔드 서버에서 AWS의 자격증명을 사용하는 <strong>Pre-Signed URL</strong> 을 생성하고 이를 클라이언트에 전달합니다.</p>
</li>
<li>
<p>클라이언트는 이 URL을 통해 지정된 시간 동안 S3 버킷에 파일을 직접 업로드 할 수 있습니다.</p>
</li>
<li>
<p>S3 에 업로드 후 서버를 통해 데이터베이스에 파일 정보를 저장합니다.</p>
</li>
</ol>
<br>
<br>
<center>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/61b9255a1dba4810e7d93e0febd689d8/a27c6/2023_05_04_image_processing_8.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 66.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAACHVAAAh1QEEnLSdAAABjUlEQVR42m1Sa2+EIBD0//+zfu2l1zZ9eSiIgOKDU0SwHeXO2qQTJbrszLKzJNM0nc9nQggvuHPu+z8sy/JvPMHLikIq1WwwxnjvEcQaQohJVVVZaxFBpev1OgzDjQxVIUrOOTKUUpTSVaPtur4PG+Z57vseomVZ5nle1zXSxnG8VdZaF0UhhIDEJU0LzvPTg+ka52Y0EvlZliEHfL0BWqiaxJbcNLVNg+2c5ljdOCAKGrbAlFJ261FWtG2LyO+xdwP8DtA20WWTqLWOhBA8PpY7EuwZ08MDmBFTfXw2wyIQx99ddgU+VrKb/ePTM2MUHiFtd/gI6O7x40kTHxbCeLRBwfG6bs2ADDOMd8IipCKy1Z1B5+2GKLGSPwhllGIGXaMvJGOiolnGZLOXstP0SsrHN5KSrEENpeDcze1PXpdCirJ8+STp5ZJSLt9Pi3eHYzvG2AdhlAuta9RHI7c5bzYGO46oiamAWxl7uJzhK6Oqwc2bcTcw4b3/OOc/9sBc6/zxYk/WxibjhHbDfgBDYO5W+QmShwAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/61b9255a1dba4810e7d93e0febd689d8/a59e9/2023_05_04_image_processing_8.webp 192w,
/static/61b9255a1dba4810e7d93e0febd689d8/0ca9f/2023_05_04_image_processing_8.webp 384w,
/static/61b9255a1dba4810e7d93e0febd689d8/84c6d/2023_05_04_image_processing_8.webp 700w"
              sizes="(max-width: 700px) 100vw, 700px"
              type="image/webp"
            />
          <source
            srcset="/static/61b9255a1dba4810e7d93e0febd689d8/3b721/2023_05_04_image_processing_8.png 192w,
/static/61b9255a1dba4810e7d93e0febd689d8/66595/2023_05_04_image_processing_8.png 384w,
/static/61b9255a1dba4810e7d93e0febd689d8/a27c6/2023_05_04_image_processing_8.png 700w"
            sizes="(max-width: 700px) 100vw, 700px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/61b9255a1dba4810e7d93e0febd689d8/a27c6/2023_05_04_image_processing_8.png"
            alt="CDN"
            title=""
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
</center>
<br>
<br>
<p>추가로 웹 콘텐츠의 로딩 속도와 사용자 경험을 더욱 향상시키기 위해 AWS CloudFront와 같은 CDN을 고려하는 것도 좋은 방법일 것 같습니다.</p>
<br>
<p>CDN을 사용하면 처음에는 멀리 떨어진 S3 같은 저장소에서 데이터를 불러오지만, 이 과정에서 데이터를 사용자에게 가까운 캐시 서버에 저장하게 됩니다. 이후 요청부터는 가까운 캐시 서버에서 데이터를 불러오기 때문에 로딩 시간이 크게 단축되고, 전체적인 웹사이트의 반응 속도가 개선될 것입니다.</p>
<br>
<h2>2. Node 버전 업그레이드</h2>
<h3>회고</h3>
<center>
<p><span
      class="gatsby-resp-image-wrapper"
      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 726px; "
    >
      <a
    class="gatsby-resp-image-link"
    href="/static/8ced0d67932199801771f2841dd641b1/c04c8/2023_05_04_image_processing_9.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
    <span
    class="gatsby-resp-image-background-image"
    style="padding-bottom: 59.895833333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAChUlEQVR42mP49+vpfwj68/L/39f//74CIyjj7+8X//9/2H939+G7u4CMv7+f//nxGKIeqJEByvr55NaLU6ce7j/76OClJ0eA5LnHh04/PHD+8eF7r88Vba5kaNCu3NP+9tPN///fARVDNYNYf16++nDNf3l6+sbyzE0VlTubyrY3Fu+ob97f7b04xWdJasPeDoEua4Y6ddUp3gvPLv7/+/m/XyD9YM1/Xz5/dzlyZfahOzt23tg458Ss3Tc2Lzw979bzk6VbGyq2N228slpjuh9Dkz5DmaL/orT/f14gaf7z/POXOw5zo3Un+5pMC3ScG2U2M9h2doTZjFCbWREGUwPM54Qx1KgJtlhMPTTj789n/38B0ZP/v8F+BuoHos+fb7/7cOPdxxuvP1x79/H66/fX3328+ebD9f+/n1XvaHVcGHv35en//97+BauHhBRQ8zOQZlBov/r368W/3y/+/gBKPP/389m/389//371//+PrnldKbXZf78/+///499fTxCaQa7/8/zLxzuVfTU5zQUFbSWt09sqeqtqJtTWTqxLrcnKbytxivERNlWzifVZs20xMHT//oTqB/v5/6tnTy/EFiYdP719z6F181bNOHB8y5oti54+ueQZ7++fHj558cS9Rze5xQcycDEEV8T////y3w+45n8v3725bhru6FcQFlwWE16dEFGdGF2VlNmRrxNoKWgkHVEan1Wbq+ZuLBlmsvbkclBoQ20Guf7Znx+P5u+f07i6rXVdV8fG7ra1ne3rulpWd/Rs6pt1YLZ3uh+DLEvc5Jz33+79//8JOcAgyfPZ/3+f////DkPfIOjvX6Dg/40nNi87tvD//y9/QcH5CJ48AWQsFfsbWAEIAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
  ></span>
  <picture>
          <source
              srcset="/static/8ced0d67932199801771f2841dd641b1/a59e9/2023_05_04_image_processing_9.webp 192w,
/static/8ced0d67932199801771f2841dd641b1/0ca9f/2023_05_04_image_processing_9.webp 384w,
/static/8ced0d67932199801771f2841dd641b1/b0d8b/2023_05_04_image_processing_9.webp 726w"
              sizes="(max-width: 726px) 100vw, 726px"
              type="image/webp"
            />
          <source
            srcset="/static/8ced0d67932199801771f2841dd641b1/3b721/2023_05_04_image_processing_9.png 192w,
/static/8ced0d67932199801771f2841dd641b1/66595/2023_05_04_image_processing_9.png 384w,
/static/8ced0d67932199801771f2841dd641b1/c04c8/2023_05_04_image_processing_9.png 726w"
            sizes="(max-width: 726px) 100vw, 726px"
            type="image/png"
          />
          <img
            class="gatsby-resp-image-image"
            src="/static/8ced0d67932199801771f2841dd641b1/c04c8/2023_05_04_image_processing_9.png"
            alt="node"
            title=""
            loading="lazy"
            decoding="async"
            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"
          />
        </picture>
  </a>
    </span></p>
</center>
<br>
<br>
<p>이미지 압축 라이브러리인 Sharp를 도입하기 위해 Node 버전을 업그레이드 하였는데 이 부분에 대해 이야기 해보겠습니다.</p>
<br>
<p>크게 두가지 이슈를 가지고 Node 버전 업그레이드를 결정했습니다.</p>
<br>
<p><strong>1. 이미지 압축 필요성</strong></p>
<br>
<p>Node 0 버전에서는 이미지 압축을 지원하는 서드 파티를 찾을 수 없었고 당시에는 버전 업그레이드만이 답이라고 생각 했습니다.</p>
<br>
<p><strong>2. ES6 문법 미지원 (let, async-await 등)</strong></p>
<br>
<p>let을 지원하지 않아 var를 사용해야 했습니다. (변수 호이스팅, 함수 스코프)</p>
<p>또, async-await, Promise를 지원하지 않다보니 콜백 함수로 작성할 수 밖에 없었고, 콜백 함수를 중첩하여 사용하다보니 코드가 복잡해지는 경우가 많이 발생했습니다.</p>
<br>
<p>두 가지 이슈를 바탕으로 버전을 0에서 14로 업그레이드 하였고, 이러한 변경은 긍정적인 부분과 부정적인 부분이 함께 나타났습니다.</p>
<br>
<p><strong>긍정적인 부분</strong></p>
<ol>
<li>신규 프로젝트들의 버전이 Node 14로 진행</li>
</ol>
<p>Node 14로의 버전 업그레이드 과정에서 겪은 다양한 문제들을 문서화하고 이를 사내에서 공유하였습니다.</p>
<p>이러한 요소가 다른 팀이 신규 프로젝트를 진행하면서 버전 14를 선택하는 데 긍정적인 영향을 미쳤습니다.</p>
<ol start="2">
<li>콜백 함수 해결</li>
</ol>
<p>Node 0에서 사용되던 복잡한 콜백 기반 코드를 Node 14의 async-await 문법을 사용하여 직관적인 코드로 리팩토링할 수 있었습니다. 이 변경을 통해 가독성과 유지 보수성을 크게 향상 시킬 수 있었습니다.</p>
<br>
<p><strong>부정적인 부분</strong></p>
<ol>
<li>코드 호환성 문제로 인한 많은 코드 수정</li>
</ol>
<p>버전 0에서 14로의 전환은 여러 코드 호환성 문제를 야기했습니다.</p>
<br>
<p>특히 클라이언트에서 전송된 데이터를 처리하는 부분에서 기존 코드와 호환되지 않아, 프로젝트의 모든 요청 처리 코드를 수정해야 했습니다. 또한 이미지나 다른 파일들을 받아 처리하는 API의 경우, multer를 추가로 도입하여 수정 작업을 진행해야 했습니다.</p>
<br>
<ol start="2">
<li>테스트에 드는 많은 시간</li>
</ol>
<p>테스트 코드 부재로 리팩토링을 통해 코드를 수정할 때마다 수동으로 테스트를 반복해야 했습니다.</p></div><style data-emotion="css hx9xpc">@media (max-width: 768px){.css-hx9xpc{padding:0 20px;}}</style><div class="css-hx9xpc e1gqsjds0"></div><style data-emotion="css 9w9jmx">.css-9w9jmx{display:grid;place-items:center;margin-top:auto;padding:50px 0;font-size:15px;text-align:center;line-height:1.5;}@media (max-width: 768px){.css-9w9jmx{font-size:13px;}}</style><footer class="css-9w9jmx e1oae0v80"><br/>© 2024 Developer Woosung Kim, Powered By Gatsby.</footer></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2023_05_04_image_processing/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-cfadfbd9f3c4dbd90a87.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-dd666b9e7b3977156692.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-709185b09b2c5122aacc.js\"],\"component---src-templates-post-template-tsx\":[\"/component---src-templates-post-template-tsx-7e0668d924d1f76cfe46.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="dc140bccc12859ce2b61";</script><script src="/webpack-runtime-1d01c89c9038c11c058f.js" async></script><script src="/framework-6a525285796fb83f2864.js" async></script><script src="/app-cfadfbd9f3c4dbd90a87.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>